(this.webpackJsonphomepage=this.webpackJsonphomepage||[]).push([[0],{13:function(e,t,a){},17:function(e,t,a){e.exports=a(33)},22:function(e,t,a){},23:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(14),c=a.n(r),l=(a(22),a(4)),i=a(2),s=(a(23),a(5)),u=a.n(s),m=(a(24),a(28),a(15)),d=a(16),f=a(3),b=[{name:"Bedroom",icon:o.a.createElement(f.b,null),isCategory:!0},{name:"Kitchen",icon:o.a.createElement(f.k,null),isCategory:!0},{name:"Living room",icon:o.a.createElement(f.c,null),isCategory:!0},{name:"House",icon:o.a.createElement(f.e,null),isCategory:!0},{name:"Shopping",icon:o.a.createElement(f.h,null),isCategory:!0},{name:"Toilet",icon:o.a.createElement(f.j,null),isCategory:!0},{name:"Outside",icon:o.a.createElement(f.d,null),isCategory:!0},{name:"Plus",icon:o.a.createElement(f.f,null)},{name:"Menu",icon:o.a.createElement(f.a,null)},{name:"Check",icon:o.a.createElement(f.g,null)}];a(31);var E=[{title:"Hours",milliseconds:36e5},{title:"Days",milliseconds:864e5},{title:"Weeks",milliseconds:6048e5},{title:"Months",milliseconds:24192e5}];function v(e){var t=e.firestore,a=e.closeEditModal,n=e.job,r=e.users,c={categories:b.filter((function(e){return e.isCategory}))}.categories,l=o.a.useState(n?n.name:""),s=Object(i.a)(l,2),u=s[0],m=s[1],d=o.a.useState(n?n.interval:1),f=Object(i.a)(d,2),v=f[0],p=f[1],g=o.a.useState(n?n.intervalUnit:E[0]),k=Object(i.a)(g,2),h=k[0],j=k[1],y=o.a.useState(n?n.points:1),C=Object(i.a)(y,2),S=C[0],N=C[1],O=o.a.useState(n?n.category:c[0].name),w=Object(i.a)(O,2),B=w[0],M=w[1],A=o.a.useState(n?n.assignee:"nobody"),T=Object(i.a)(A,2),U=T[0],I=T[1];return o.a.createElement("div",{id:"modalBackground",className:"modalBackground",onClick:function(e){"modalBackground"===e.target.id&&a()},onSubmit:n?function(e){(e.preventDefault(),n&&u&&v&&S)&&(t.collection("jobs").doc(n.id).update({name:u,interval:v,intervalUnit:h,points:S,category:B,assignee:U}),a())}:function(e){e.preventDefault(),u&&v&&S&&(t.collection("jobs").add({name:u,interval:v,intervalUnit:h,points:S,category:B,completedAt:new Date,assignee:U}),a())}},o.a.createElement("div",{className:"modal"},o.a.createElement("form",null,o.a.createElement("label",{htmlFor:"name"},n?"Edit job":"Create a job"),o.a.createElement("input",{type:"text",id:"name",name:"name",placeholder:"Name",value:u,onChange:function(e){return m(e.currentTarget.value)}}),o.a.createElement("label",{htmlFor:"category"},"Category"),o.a.createElement("select",{name:"category",id:"category",value:B,onChange:function(e){return M(e.currentTarget.value)}},c.map((function(e){return o.a.createElement("option",{key:e.name,value:e.name},e.name)}))),o.a.createElement("label",{htmlFor:"interval"},"Repeat every"),o.a.createElement("input",{type:"number",name:"interval",id:"interval",value:v,onChange:function(e){return p(e.currentTarget.value)}}),o.a.createElement("div",{className:"durationButtons"},E.map((function(e){return o.a.createElement("button",{className:e.title===h.title?"selected":"",key:e.title,type:"button",onClick:function(){return j(e)}},e.title)}))),o.a.createElement("label",{htmlFor:"points"},"Points"),o.a.createElement("input",{type:"number",name:"points",id:"points",value:S,onChange:function(e){return N(e.currentTarget.value)}}),o.a.createElement("label",{htmlFor:"assignee"},"Assignee"),o.a.createElement("select",{name:"assignee",id:"assignee",value:U,onChange:function(e){return I(e.currentTarget.value)}},o.a.createElement("option",{value:"nobody"},"Anyone"),r.map((function(e){return o.a.createElement("option",{key:e.email,value:e.email},e.name)}))),!n&&o.a.createElement("button",{type:"submit",disabled:!u},"Create"),n&&o.a.createElement("div",{className:"dualButtons"},o.a.createElement("button",{type:"subbmit"},"Save"),o.a.createElement("button",{type:"button",onClick:function(){n&&(t.collection("jobs").doc(n.id).delete(),a())}},"Delete")))))}var p=a(0);a(32);function g(e){var t=e.icon,a=e.size,n=void 0===a?24:a,r=e.color,c=void 0===r?"black":r,l=b.find((function(e){return e.name===t}));return l?o.a.createElement(p.b.Provider,{value:{style:{fontSize:n+"px",color:c}}},o.a.createElement("div",{className:"iconWrapper"},l.icon)):o.a.createElement(o.a.Fragment,null,"404")}function k(e){var t=e.openCreateModal;return o.a.createElement("div",{className:"addJob jobCube",onClick:t},o.a.createElement(g,{icon:"Plus",size:30,color:"rgb(0, 123, 255)"}),"Add a new job")}function h(e){var t=e.job,a=1e3*t.completedAt.seconds,n=(new Date).getTime(),r=(a+t.intervalUnit.milliseconds*t.interval-n)/1e3,c=r<=0;return o.a.createElement("div",{className:function(){var e=["timeleft"];return c&&e.push("late"),r<86400?e.push("soon"):e.push("early"),e.join(" ")}()},!c&&"in ",function(){var e=Math.abs(r);return e<60?Math.floor(e)+" seconds":e<3600?Math.floor(e/60)+" minutes":e<86400?Math.floor(e/3600)+" hours":e<604800?Math.floor(r/86400)+" days":e<2419200?Math.floor(e/604800)+" weeks":Math.floor(e/2419200)+" months"}(),c&&" late")}function j(e){var t=e.url;return o.a.createElement("img",{className:"assigneeBubble",src:t,alt:t})}function y(e){var t=e.job,a=e.firestore,n=e.selectedJob,r=e.setSelectedJob,c=e.openEditModal,l=e.assignee,s=o.a.useState(!1),u=Object(i.a)(s,2),m=u[0],d=u[1];o.a.useEffect((function(){n!==t&&d(!1)}),[n,t]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"jobCube",onClick:function(){r(n===t?void 0:t)}},l&&o.a.createElement(j,{url:l.imageUrl}),o.a.createElement(h,{job:t}),o.a.createElement(g,{icon:t.category,size:30}),t.name),n===t&&o.a.createElement("div",{className:"expandedJob"},o.a.createElement("button",{className:"jobBtn",onClick:c},"Edit"),m?o.a.createElement("button",{className:"jobBtn",onClick:function(){d(!1),a.collection("jobs").doc(t.id).update({completedAt:new Date})}},"Are you sure?"):o.a.createElement("button",{className:"jobBtn",onClick:function(){return d(!0)}},"Mark done")))}a(13);var C=function(e){var t=e.firestore,a=e.user,n=o.a.useState([]),r=Object(i.a)(n,2),c=r[0],s=r[1],u=o.a.useState([]),m=Object(i.a)(u,2),f=m[0],b=m[1],E=o.a.useState(),p=Object(i.a)(E,2),g=p[0],h=p[1],j=o.a.useState(!1),C=Object(i.a)(j,2),S=C[0],N=C[1];o.a.useEffect((function(){t.collection("jobs").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())})),a=Object(d.orderBy)(t,(function(e){return e.completedAt.seconds+e.interval*(e.intervalUnit.milliseconds/1e3)}));s(a)}))}),[t]),o.a.useEffect((function(){t.collection("users").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));b(t)}))}),[t]);var O=function(){N(!0)};return o.a.createElement("div",{className:"jobsContainer"},c&&c.map((function(e){return o.a.createElement(y,{key:e.id,job:e,firestore:t,selectedJob:g,setSelectedJob:h,openEditModal:O,assignee:f.find((function(t){return t.email===e.assignee}))})})),o.a.createElement(k,{firestore:t,user:a,openCreateModal:function(){h(void 0),N(!0)}}),S&&o.a.createElement(v,{closeEditModal:function(){h(void 0),N(!1)},firestore:t,job:g,users:f}))};function S(e){var t=e.onClick;return o.a.createElement("div",{className:"addJob jobCube",onClick:t},o.a.createElement(g,{icon:"Plus",size:30,color:"rgb(0, 123, 255)"}),"Add a new Task")}function N(e){var t=e.task,a=e.selectedTask,n=e.setSelectedTask,r=e.firestore,c=o.a.useState(!1),l=Object(i.a)(c,2),s=l[0],u=l[1],m=o.a.useState(!1),d=Object(i.a)(m,2),f=d[0],b=d[1],E=o.a.useState(),v=Object(i.a)(E,2),p=v[0],k=v[1];return o.a.useEffect((function(){f&&document.getElementById("editTaskName").focus()}),[f]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"jobCube",onClick:function(){f||n(a===t?void 0:t)}},o.a.createElement(g,{icon:"Check",size:30}),o.a.createElement("input",{id:"editTaskName",className:"taskEditField",type:"text",value:f?p:t.name,disabled:!f,onChange:function(e){k(e.target.value)},onBlur:function(){var e=r.collection("tasks").doc(t.id),a=p||t.name;e.update({name:a}),b(!1)}})),a===t&&!f&&o.a.createElement("div",{className:"expandedJob"},o.a.createElement("button",{className:"jobBtn",onClick:function(){f||(k(t.name),b(!0))}},"Edit"),s?o.a.createElement("button",{className:"jobBtn",onClick:function(){t&&(n(void 0),r.collection("tasks").doc(t.id).delete())},disabled:f},"Are you sure?"):o.a.createElement("button",{className:"jobBtn",onClick:function(){return u(!0)}},"Mark done")))}var O=function(e){var t=e.firestore,a=(e.user,o.a.useState([])),n=Object(i.a)(a,2),r=n[0],c=n[1],s=o.a.useState(),u=Object(i.a)(s,2),m=u[0],d=u[1];return o.a.useEffect((function(){t.collection("tasks").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));c(t)}))}),[t]),o.a.createElement("div",{className:"jobsContainer"},r&&r.map((function(e){return o.a.createElement(N,{key:e.id,task:e,selectedTask:m,setSelectedTask:d,firestore:t})})),o.a.createElement(S,{onClick:function(){t.collection("tasks").add({name:"Uusi teht\xe4v\xe4"})}}))};u.a.initializeApp({apiKey:"AIzaSyDuLhFU-X9QUqlx0Cw1sn92eAtB7pSOSk0",authDomain:"housework-a9d38.firebaseapp.com",databaseURL:"https://housework-a9d38.firebaseio.com",projectId:"housework-a9d38",storageBucket:"housework-a9d38.appspot.com",messagingSenderId:"475852222396",appId:"1:475852222396:web:9fa6485a42ba1284e985b9",measurementId:"G-ZVBWH6CY7R"});var w=u.a.auth(),B=u.a.firestore();function M(){var e=o.a.useState([]),t=Object(i.a)(e,2),a=t[0],n=t[1];o.a.useEffect((function(){B.collection("users").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));n(t)}))}),[]);return o.a.createElement("button",{className:"loginButton",onClick:function(){var e=new u.a.auth.GoogleAuthProvider;w.signInWithPopup(e).then((function(e){var t=e.user;a.find((function(e){return e.email===t.email}))||B.collection("users").add({name:t.displayName,email:t.email,imageUrl:t.photoURL})}))}},o.a.createElement(p.b.Provider,{value:{style:{fontSize:"150px",color:"#ff7f34"}}},o.a.createElement("div",null,o.a.createElement(f.i,null))),"Log in")}function A(){return o.a.createElement("button",{className:"signOutButton",onClick:function(){return w.signOut()}},o.a.createElement(p.b.Provider,{value:{style:{fontSize:"50px",color:"#ff7f34"}}},o.a.createElement("div",null,o.a.createElement(f.i,null))),"Log out")}function T(e){var t=e.selectedView,a=e.setSelectedView,n=o.a.useState(!1),r=Object(i.a)(n,2),c=r[0],l=r[1],s=function(e){return t===e?"selected":""};return o.a.createElement("div",{className:"clickableMenu",onClick:function(){return l(!c)}},o.a.createElement(g,{icon:"Menu",color:"white"}),c&&o.a.createElement("div",{className:"navMenu"},o.a.createElement("button",{className:s("jobs"),onClick:function(){return a("jobs")}},"Jobs"),o.a.createElement("button",{className:s("tasks"),onClick:function(){return a("tasks")}},"Tasks")))}function U(e){var t=e.user,a=o.a.useState(!1),n=Object(i.a)(a,2),r=n[0],c=n[1];return t?o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{className:"userImage",src:t.photoURL,alt:t.displayName,onClick:function(){return c(!r)}}),"Welcome ",t.displayName,r&&o.a.createElement(A,null)):null}var I=function(){var e=Object(m.a)(w),t=Object(i.a)(e,1)[0],a=localStorage.getItem("selectedView"),n=o.a.useState(a||"jobs"),r=Object(i.a)(n,2),c=r[0],l=r[1];return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"headerMenu"},o.a.createElement(T,{selectedView:c,setSelectedView:function(e){l(e),localStorage.setItem("selectedView",e)}})),o.a.createElement("div",{className:"headerInfo"},o.a.createElement(U,{user:t}))),t&&"jobs"===c&&o.a.createElement(C,{firestore:B,user:t}),t&&"tasks"===c&&o.a.createElement(O,{firestore:B,user:t}),!t&&o.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.a6836fc5.chunk.js.map